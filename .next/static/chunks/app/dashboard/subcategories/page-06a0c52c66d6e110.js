(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{1669:(e,s,t)=>{Promise.resolve().then(t.bind(t,6071))},2714:(e,s,t)=>{"use strict";t.d(s,{J:()=>c});var l=t(5155),i=t(2115),a=t(968),r=t(2085),d=t(3999);let n=(0,r.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.b,{ref:s,className:(0,d.cn)(n(),t),...i})});c.displayName=a.b.displayName},4964:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>d});var l=t(5155),i=t(2115),a=t(704),r=t(3999);let d=a.bL,n=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.B8,{ref:s,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});n.displayName=a.B8.displayName;let c=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.l9,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});c.displayName=a.l9.displayName;let o=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.UC,{ref:s,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});o.displayName=a.UC.displayName},5784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>h,eb:()=>f,gC:()=>p,l6:()=>o,yv:()=>u});var l=t(5155),i=t(2115),a=t(3081),r=t(6474),d=t(7863),n=t(5196),c=t(3999);let o=a.bL;a.YJ;let u=a.WT,h=i.forwardRef((e,s)=>{let{className:t,children:i,...d}=e;return(0,l.jsxs)(a.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...d,children:[i,(0,l.jsx)(a.In,{asChild:!0,children:(0,l.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=a.l9.displayName;let x=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=a.PP.displayName;let m=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,l.jsx)(r.A,{className:"h-4 w-4"})})});m.displayName=a.wn.displayName;let p=i.forwardRef((e,s)=>{let{className:t,children:i,position:r="popper",...d}=e;return(0,l.jsx)(a.ZL,{children:(0,l.jsxs)(a.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...d,children:[(0,l.jsx)(x,{}),(0,l.jsx)(a.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,l.jsx)(m,{})]})})});p.displayName=a.UC.displayName,i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...i})}).displayName=a.JU.displayName;let f=i.forwardRef((e,s)=>{let{className:t,children:i,...r}=e;return(0,l.jsxs)(a.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(a.VF,{children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})}),(0,l.jsx)(a.p4,{children:i})]})});f.displayName=a.q7.displayName,i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)(a.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...i})}).displayName=a.wv.displayName},6071:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var l=t(5155),i=t(2115),a=t(7168),r=t(8482),d=t(8145),n=t(9852),c=t(5784),o=t(9840),u=t(2714),h=t(9474),x=t(3580),m=t(4616),p=t(7924),f=t(8239),j=t(7835),v=t(3717),g=t(2525),N=t(98),y=t(4964);function b(){let[e,s]=(0,i.useState)([]),[t,b]=(0,i.useState)([]),[w,C]=(0,i.useState)(!0),[z,k]=(0,i.useState)(""),[J,E]=(0,i.useState)(!1),[F,I]=(0,i.useState)(!1),[R,A]=(0,i.useState)(null),[S,L]=(0,i.useState)({az:{title:"",description:""},ru:{title:"",description:""},en:{title:"",description:""},categoryId:[]}),{toast:T}=(0,x.dj)();(0,i.useEffect)(()=>{U(),$()},[]);let U=async()=>{try{let e=await N.uE.getSubCategories("ru");if(200===e.statusCode&&e.data)s(e.data);else throw Error(e.error||"Ошибка загрузки подкатегорий")}catch(e){T({title:"Ошибка",description:"Не удалось загрузить подкатегории",variant:"destructive"})}finally{C(!1)}},$=async()=>{try{let e=await N.uE.getCategories("ru");200===e.statusCode&&e.data&&b(e.data)}catch(e){console.error("Ошибка загрузки категорий:",e)}},X=async()=>{try{let e={translations:S,categoryId:S.categoryId},s=await N.uE.createSubCategory(e);if(200===s.statusCode)T({title:"Успешно",description:"Подкатегория создана"}),E(!1),V(),U();else throw Error(s.error||"Ошибка создания подкатегории")}catch(e){T({title:"Ошибка",description:"Не удалось создать подкатегорию",variant:"destructive"})}},_=async()=>{if(R)try{let e={id:R.id,translations:S,categoryId:S.categoryId},s=await N.uE.updateSubCategory(e);if(200===s.statusCode)T({title:"Успешно",description:"Подкатегория обновлена"}),I(!1),V(),U();else throw Error(s.error||"Ошибка обновления подкатегории")}catch(e){T({title:"Ошибка",description:"Не удалось обновить подкатегорию",variant:"destructive"})}},q=async e=>{if(confirm("Вы уверены, что хотите удалить эту подкатегорию?"))try{let s=await N.uE.deleteSubCategory(e);if(200===s.statusCode)T({title:"Успешно",description:"Подкатегория удалена"}),U();else throw Error(s.error||"Ошибка удаления подкатегории")}catch(e){T({title:"Ошибка",description:"Не удалось удалить подкатегорию",variant:"destructive"})}},P=e=>{A(e);let s=e.translations.find(e=>"ru"===e.locale),t=e.translations.find(e=>"az"===e.locale),l=e.translations.find(e=>"en"===e.locale);L({ru:{title:(null==s?void 0:s.title)||"",description:(null==s?void 0:s.description)||""},az:{title:(null==t?void 0:t.title)||"",description:(null==t?void 0:t.description)||""},en:{title:(null==l?void 0:l.title)||"",description:(null==l?void 0:l.description)||""},categoryId:e.categoryId}),I(!0)},V=()=>{L({az:{title:"",description:""},ru:{title:"",description:""},en:{title:"",description:""},categoryId:[]}),A(null)},B=e.filter(e=>{var s;let t=e.translations.find(e=>"ru"===e.locale);return(null==t?void 0:t.title.toLowerCase().includes(z.toLowerCase()))||(null==t?void 0:null===(s=t.description)||void 0===s?void 0:s.toLowerCase().includes(z.toLowerCase()))});return w?(0,l.jsx)("div",{className:"p-8",children:(0,l.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,l.jsx)("div",{className:"h-8 bg-muted rounded w-1/4"}),(0,l.jsx)("div",{className:"grid gap-4",children:[void 0,void 0,void 0].map((e,s)=>(0,l.jsx)("div",{className:"h-32 bg-muted rounded"},s))})]})}):(0,l.jsxs)("div",{className:"p-8 space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Подкатегории"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Управляйте подкатегориями контента"})]}),(0,l.jsxs)(o.lG,{open:J,onOpenChange:E,children:[(0,l.jsx)(o.zM,{asChild:!0,children:(0,l.jsxs)(a.$,{children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Создать подкатегорию"]})}),(0,l.jsxs)(o.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)(o.c7,{children:[(0,l.jsx)(o.L3,{children:"Создать подкатегорию"}),(0,l.jsx)(o.rr,{children:"Создайте новую подкатегорию с переводами на трех языках"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"categories",children:"Категории"}),(0,l.jsxs)(c.l6,{value:S.categoryId[0]||"",onValueChange:e=>L({...S,categoryId:[e]}),children:[(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Выберите категорию"})}),(0,l.jsx)(c.gC,{children:t.map(e=>{let s=e.translations.find(e=>"ru"===e.locale);return(0,l.jsx)(c.eb,{value:e.id,children:(null==s?void 0:s.title)||"Без названия"},e.id)})})]})]}),(0,l.jsxs)(y.tU,{defaultValue:"ru",className:"w-full",children:[(0,l.jsxs)(y.j7,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(y.Xi,{value:"ru",children:"Русский"}),(0,l.jsx)(y.Xi,{value:"az",children:"Азербайджанский"}),(0,l.jsx)(y.Xi,{value:"en",children:"Английский"})]}),(0,l.jsxs)(y.av,{value:"ru",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"ru-title",children:"Заголовок (Русский)"}),(0,l.jsx)(n.p,{id:"ru-title",value:S.ru.title,onChange:e=>L({...S,ru:{...S.ru,title:e.target.value}}),placeholder:"Введите заголовок на русском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"ru-description",children:"Описание (Русский)"}),(0,l.jsx)(h.T,{id:"ru-description",value:S.ru.description,onChange:e=>L({...S,ru:{...S.ru,description:e.target.value}}),placeholder:"Введите описание на русском",rows:3})]})]}),(0,l.jsxs)(y.av,{value:"az",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"az-title",children:"Заголовок (Азербайджанский)"}),(0,l.jsx)(n.p,{id:"az-title",value:S.az.title,onChange:e=>L({...S,az:{...S.az,title:e.target.value}}),placeholder:"Введите заголовок на азербайджанском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"az-description",children:"Описание (Азербайджанский)"}),(0,l.jsx)(h.T,{id:"az-description",value:S.az.description,onChange:e=>L({...S,az:{...S.az,description:e.target.value}}),placeholder:"Введите описание на азербайджанском",rows:3})]})]}),(0,l.jsxs)(y.av,{value:"en",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"en-title",children:"Заголовок (Английский)"}),(0,l.jsx)(n.p,{id:"en-title",value:S.en.title,onChange:e=>L({...S,en:{...S.en,title:e.target.value}}),placeholder:"Введите заголовок на английском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"en-description",children:"Описание (Английский)"}),(0,l.jsx)(h.T,{id:"en-description",value:S.en.description,onChange:e=>L({...S,en:{...S.en,description:e.target.value}}),placeholder:"Введите описание на английском",rows:3})]})]})]})]}),(0,l.jsxs)(o.Es,{children:[(0,l.jsx)(a.$,{variant:"outline",onClick:()=>E(!1),children:"Отмена"}),(0,l.jsx)(a.$,{onClick:X,children:"Создать подкатегорию"})]})]})]})]}),(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,l.jsx)(n.p,{placeholder:"Поиск подкатегорий...",value:z,onChange:e=>k(e.target.value),className:"pl-10"})]})}),(0,l.jsx)("div",{className:"grid gap-4",children:B.map(e=>{let s=e.translations.find(e=>"ru"===e.locale),i=e.translations.find(e=>"az"===e.locale),n=e.translations.find(e=>"en"===e.locale),c=t.find(s=>s.id===e.categoryId[0]),o=null==c?void 0:c.translations.find(e=>"ru"===e.locale);return(0,l.jsxs)(r.Zp,{children:[(0,l.jsx)(r.aR,{children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(f.A,{className:"w-5 h-5"}),(null==s?void 0:s.title)||"Без названия"]}),(0,l.jsx)(r.BT,{children:(null==s?void 0:s.description)||"Без описания"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(d.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,l.jsx)(j.A,{className:"w-3 h-3"}),e.translations.length,"/3"]}),(0,l.jsx)(a.$,{variant:"outline",size:"icon",onClick:()=>P(e),children:(0,l.jsx)(v.A,{className:"w-4 h-4"})}),(0,l.jsx)(a.$,{variant:"outline",size:"icon",onClick:()=>q(e.id),children:(0,l.jsx)(g.A,{className:"w-4 h-4"})})]})]})}),(0,l.jsxs)(r.Wu,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-1",children:"Русский"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:(null==s?void 0:s.title)||"Не переведено"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-1",children:"Азербайджанский"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:(null==i?void 0:i.title)||"Не переведено"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-1",children:"Английский"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:(null==n?void 0:n.title)||"Не переведено"})]})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Родительская категория:"}),(0,l.jsx)(d.E,{variant:"secondary",children:(null==o?void 0:o.title)||"Не указана"})]})})]})]},e.id)})}),0===B.length&&(0,l.jsx)(r.Zp,{children:(0,l.jsx)(r.Wu,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(f.A,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Подкатегории не найдены"}),(0,l.jsx)("p",{className:"text-muted-foreground mb-4",children:z?"Попробуйте изменить поисковый запрос":"Создайте первую подкатегорию для начала работы"}),(0,l.jsxs)(a.$,{onClick:()=>E(!0),children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Создать подкатегорию"]})]})})}),(0,l.jsx)(o.lG,{open:F,onOpenChange:I,children:(0,l.jsxs)(o.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)(o.c7,{children:[(0,l.jsx)(o.L3,{children:"Редактировать подкатегорию"}),(0,l.jsx)(o.rr,{children:"Внесите изменения в подкатегорию"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-categories",children:"Категории"}),(0,l.jsxs)(c.l6,{value:S.categoryId[0]||"",onValueChange:e=>L({...S,categoryId:[e]}),children:[(0,l.jsx)(c.bq,{children:(0,l.jsx)(c.yv,{placeholder:"Выберите категорию"})}),(0,l.jsx)(c.gC,{children:t.map(e=>{let s=e.translations.find(e=>"ru"===e.locale);return(0,l.jsx)(c.eb,{value:e.id,children:(null==s?void 0:s.title)||"Без названия"},e.id)})})]})]}),(0,l.jsxs)(y.tU,{defaultValue:"ru",className:"w-full",children:[(0,l.jsxs)(y.j7,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(y.Xi,{value:"ru",children:"Русский"}),(0,l.jsx)(y.Xi,{value:"az",children:"Азербайджанский"}),(0,l.jsx)(y.Xi,{value:"en",children:"Английский"})]}),(0,l.jsxs)(y.av,{value:"ru",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-ru-title",children:"Заголовок (Русский)"}),(0,l.jsx)(n.p,{id:"edit-ru-title",value:S.ru.title,onChange:e=>L({...S,ru:{...S.ru,title:e.target.value}}),placeholder:"Введите заголовок на русском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-ru-description",children:"Описание (Русский)"}),(0,l.jsx)(h.T,{id:"edit-ru-description",value:S.ru.description,onChange:e=>L({...S,ru:{...S.ru,description:e.target.value}}),placeholder:"Введите описание на русском",rows:3})]})]}),(0,l.jsxs)(y.av,{value:"az",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-az-title",children:"Заголовок (Азербайджанский)"}),(0,l.jsx)(n.p,{id:"edit-az-title",value:S.az.title,onChange:e=>L({...S,az:{...S.az,title:e.target.value}}),placeholder:"Введите заголовок на азербайджанском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-az-description",children:"Описание (Азербайджанский)"}),(0,l.jsx)(h.T,{id:"edit-az-description",value:S.az.description,onChange:e=>L({...S,az:{...S.az,description:e.target.value}}),placeholder:"Введите описание на азербайджанском",rows:3})]})]}),(0,l.jsxs)(y.av,{value:"en",className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-en-title",children:"Заголовок (Английский)"}),(0,l.jsx)(n.p,{id:"edit-en-title",value:S.en.title,onChange:e=>L({...S,en:{...S.en,title:e.target.value}}),placeholder:"Введите заголовок на английском"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.J,{htmlFor:"edit-en-description",children:"Описание (Английский)"}),(0,l.jsx)(h.T,{id:"edit-en-description",value:S.en.description,onChange:e=>L({...S,en:{...S.en,description:e.target.value}}),placeholder:"Введите описание на английском",rows:3})]})]})]})]}),(0,l.jsxs)(o.Es,{children:[(0,l.jsx)(a.$,{variant:"outline",onClick:()=>I(!1),children:"Отмена"}),(0,l.jsx)(a.$,{onClick:_,children:"Сохранить изменения"})]})]})})]})}},9474:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var l=t(5155),i=t(2115),a=t(3999);let r=i.forwardRef((e,s)=>{let{className:t,...i}=e;return(0,l.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});r.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[455,287,771,126,292,57,441,684,358],()=>s(1669)),_N_E=e.O()}]);